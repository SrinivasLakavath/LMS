{"version":3,"sources":["apiCoursesController.js"],"names":["Course","require","getCourses","req","res","find","exec","courses","send","status","getCourseById","courseId","params","id","findById","course","addReview","body","author","rating","reviewText","newReview","timestamp","Date","reviews","push","save","module","exports"],"mappings":";;AAAA;AACA,IAAMA,MAAM,GAAGC,OAAO,CAAC,kBAAD,CAAtB,C,CAEA;;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAEOJ,MAAM,CAACK,IAAP,GAAcC,IAAd,EAFP;;AAAA;AAETC,UAAAA,OAFS;AAGfH,UAAAA,GAAG,CAACI,IAAJ,CAASD,OAAT,EAHe,CAGI;;AAHJ;AAAA;;AAAA;AAAA;AAAA;AAKfH,UAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,0CAArB;;AALe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAnB,C,CASA;;;AACA,IAAME,aAAa,GAAG,SAAhBA,aAAgB,CAAOP,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACdO,UAAAA,QADc,GACHR,GAAG,CAACS,MAAJ,CAAWC,EADR;AAAA;AAAA;AAAA,0CAIGb,MAAM,CAACc,QAAP,CAAgBH,QAAhB,EAA0BL,IAA1B,EAJH;;AAAA;AAIZS,UAAAA,MAJY;;AAAA,cAKbA,MALa;AAAA;AAAA;AAAA;;AAAA,4CAMTX,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,kBAArB,CANS;;AAAA;AAQlBJ,UAAAA,GAAG,CAACI,IAAJ,CAASO,MAAT,EARkB,CAQA;;AARA;AAAA;;AAAA;AAAA;AAAA;AAUlBX,UAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,0CAArB;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAtB,C,CAcA;;;AACA,IAAMQ,SAAS,GAAG,SAAZA,SAAY,CAAOb,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AACVO,UAAAA,QADU,GACCR,GAAG,CAACS,MAAJ,CAAWC,EADZ;AAAA,sBAEuBV,GAAG,CAACc,IAF3B,EAERC,MAFQ,aAERA,MAFQ,EAEAC,MAFA,aAEAA,MAFA,EAEQC,UAFR,aAEQA,UAFR;AAAA;AAAA;AAAA,0CAKOpB,MAAM,CAACc,QAAP,CAAgBH,QAAhB,EAA0BL,IAA1B,EALP;;AAAA;AAKRS,UAAAA,MALQ;;AAAA,cAMTA,MANS;AAAA;AAAA;AAAA;;AAAA,4CAOLX,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,kBAArB,CAPK;;AAAA;AAURa,UAAAA,SAVQ,GAUI;AAChBH,YAAAA,MAAM,EAANA,MADgB;AAEhBC,YAAAA,MAAM,EAANA,MAFgB;AAGhBC,YAAAA,UAAU,EAAVA,UAHgB;AAIhBE,YAAAA,SAAS,EAAE,IAAIC,IAAJ;AAJK,WAVJ,EAiBd;;AACAR,UAAAA,MAAM,CAACS,OAAP,CAAeC,IAAf,CAAoBJ,SAApB;AAlBc;AAAA,0CAmBRN,MAAM,CAACW,IAAP,EAnBQ;;AAAA;AAmBO;AAErB;AACAtB,UAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,2BAArB;AAtBc;AAAA;;AAAA;AAAA;AAAA;AAwBdJ,UAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,sCAArB;;AAxBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAlB,C,CA4BA;;;AACAmB,MAAM,CAACC,OAAP,GAAiB;AACf1B,EAAAA,UAAU,EAAVA,UADe;AAEfQ,EAAAA,aAAa,EAAbA,aAFe;AAGfM,EAAAA,SAAS,EAATA,SAHe,CAGJ;;AAHI,CAAjB","sourcesContent":["// /api/controllers/apiCoursesController.js\r\nconst Course = require(\"../models/course\");\r\n\r\n// Function to get all courses\r\nconst getCourses = async (req, res) => {\r\n  try {\r\n    const courses = await Course.find().exec();\r\n    res.send(courses); // Using .send() as per your preference\r\n  } catch (error) {\r\n    res.status(500).send(\"Error retrieving courses: \" + error);\r\n  }\r\n};\r\n\r\n// Function to get a course by its ID\r\nconst getCourseById = async (req, res) => {\r\n  const courseId = req.params.id;\r\n\r\n  try {\r\n    const course = await Course.findById(courseId).exec();\r\n    if (!course) {\r\n      return res.status(404).send(\"Course not found\");\r\n    }\r\n    res.send(course); // Using .send() as per your preference\r\n  } catch (error) {\r\n    res.status(500).send(\"Error retrieving course: \" + error);\r\n  }\r\n};\r\n\r\n// Function to add a review to a specific course\r\nconst addReview = async (req, res) => {\r\n  const courseId = req.params.id;\r\n  const { author, rating, reviewText } = req.body;\r\n\r\n  try {\r\n    const course = await Course.findById(courseId).exec();\r\n    if (!course) {\r\n      return res.status(404).send(\"Course not found\");\r\n    }\r\n\r\n    const newReview = {\r\n      author,\r\n      rating,\r\n      reviewText,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Add the new review to the course's reviews array\r\n    course.reviews.push(newReview);\r\n    await course.save(); // Save the updated course\r\n\r\n    // Respond with success\r\n    res.status(201).send(\"Review added successfully\");\r\n  } catch (error) {\r\n    res.status(500).send(\"Error adding review: \" + error);\r\n  }\r\n};\r\n\r\n// Export the functions\r\nmodule.exports = {\r\n  getCourses,\r\n  getCourseById,\r\n  addReview, // New function added here\r\n};\r\n"],"file":"apiCoursesController.dev.js"}