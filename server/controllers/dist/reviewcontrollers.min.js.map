{"version":3,"sources":["reviewcontrollers.js"],"names":["Course","require","addReview","req","res","courseId","_req$body","author","rating","reviewText","course","newReview","regeneratorRuntime","async","_context","prev","next","params","id","body","awrap","findById","exec","sent","abrupt","status","send","Date","toLocaleString","reviews","push","save","redirect","concat","t0","stop","timestamp"],"mappings":"aAAA,IAAMA,OAASC,QAAQ,wBAGjBC,UAAY,SAAOC,EAAKC,GAAZ,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OACVX,EAAWF,EAAIc,OAAOC,GADZZ,EAAYF,EAAZe,KAAZjB,EAAYI,EAAZJ,OAAYM,EAAAF,EAAAE,OAAZN,EAAYI,EAAZJ,WAAYY,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAQ,MAAApB,OAAAqB,SAAAhB,GAAAiB,QAAA,KAAA,EAAA,GAAAZ,EAAAI,EAAAS,KAAA,CAAAT,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAU,OAAA,SAAApB,EAAAqB,OAAA,KAAAC,KAAA,qBAAA,KAAA,EAAA,OAAAf,EAAA,CAAAJ,OAAAA,EAcZC,OAAAA,EAdYC,WAAAA,EAMRC,WANQ,IAAAiB,MAAAC,kBAAAlB,EAAAmB,QAAAC,KAAAnB,GAAAG,EAAAE,KAAA,GAAAJ,mBAAAQ,MAAAV,EAAAqB,QAAA,KAAA,GAwBd3B,EAAI4B,SAAJ,YAAAC,OAAyB5B,IAxBXS,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAoB,GAAApB,EAAA,MAAA,GAWdV,EAAAqB,OAAA,KAAAC,KAAA,wBAAAZ,EAAAoB,IAXc,KAAA,GAAA,IAAA,MAAA,OAAApB,EAAAqB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,OAeZ1B,OAAAA,QAAAA,CACA2B,UAAAA","file":"reviewcontrollers.min.js","sourcesContent":["const Course = require(\"../api/models/course\");\r\n\r\n// Function to add a review to a specific course\r\nconst addReview = async (req, res) => {\r\n  const courseId = req.params.id;\r\n  const { author, rating, reviewText } = req.body;\r\n\r\n  try {\r\n    // Find the course by ID\r\n    const course = await Course.findById(courseId).exec();\r\n    if (!course) {\r\n      return res.status(404).send(\"Course not found\");\r\n    }\r\n\r\n    // Create a new review object\r\n    const newReview = {\r\n      author,\r\n      rating,\r\n      reviewText,\r\n      timestamp: new Date().toLocaleString(), // Include time for better detail\r\n    };\r\n\r\n    // Push the new review to the course's reviews array\r\n    course.reviews.push(newReview);\r\n    await course.save();\r\n\r\n    // Redirect to the course detail page after adding the review\r\n    res.redirect(`/courses/${courseId}`);\r\n  } catch (error) {\r\n    res.status(500).send(\"Error adding review: \" + error);\r\n  }\r\n};\r\n\r\nmodule.exports = {\r\n  addReview,\r\n};"]}