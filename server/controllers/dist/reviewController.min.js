"use strict";var Course=require("../../api/models/course");exports.addReview=function(r,t){var a,n,s,u,i,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.params.id,n=r.body,s=n.author,u=n.rating,i=n.reviewText,e.prev=2,e.next=5,regeneratorRuntime.awrap(Course.findById(a).exec());case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return",t.status(404).send("Course not found"));case 8:return c={author:s,rating:u,reviewText:i,timestamp:new Date},o.reviews.push(c),e.next=12,regeneratorRuntime.awrap(o.save());case 12:t.redirect("/courses/".concat(a)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),t.status(500).send("Error adding review: "+e.t0.message);case 18:case"end":return e.stop()}},null,null,[[2,15]])};
//# sourceMappingURL=reviewController.min.js.map
