{"version":3,"sources":["reviewcontrollers.js"],"names":["Course","require","addReview","req","res","courseId","params","id","body","author","rating","reviewText","findById","exec","course","status","send","newReview","timestamp","Date","toLocaleString","reviews","push","save","redirect","module","exports"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,sBAAD,CAAtB,C,CAEA;;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AACVC,UAAAA,QADU,GACCF,GAAG,CAACG,MAAJ,CAAWC,EADZ;AAAA,sBAEuBJ,GAAG,CAACK,IAF3B,EAERC,MAFQ,aAERA,MAFQ,EAEAC,MAFA,aAEAA,MAFA,EAEQC,UAFR,aAEQA,UAFR;AAAA;AAAA;AAAA,0CAMOX,MAAM,CAACY,QAAP,CAAgBP,QAAhB,EAA0BQ,IAA1B,EANP;;AAAA;AAMRC,UAAAA,MANQ;;AAAA,cAOTA,MAPS;AAAA;AAAA;AAAA;;AAAA,2CAQLV,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,kBAArB,CARK;;AAAA;AAWd;AACMC,UAAAA,SAZQ,GAYI;AAChBR,YAAAA,MAAM,EAANA,MADgB;AAEhBC,YAAAA,MAAM,EAANA,MAFgB;AAGhBC,YAAAA,UAAU,EAAVA,UAHgB;AAIhBO,YAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,cAAX,EAJK,CAIwB;;AAJxB,WAZJ,EAmBd;;AACAN,UAAAA,MAAM,CAACO,OAAP,CAAeC,IAAf,CAAoBL,SAApB;AApBc;AAAA,0CAqBRH,MAAM,CAACS,IAAP,EArBQ;;AAAA;AAuBd;AACAnB,UAAAA,GAAG,CAACoB,QAAJ,oBAAyBnB,QAAzB;AAxBc;AAAA;;AAAA;AAAA;AAAA;AA0BdD,UAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qCAArB;;AA1Bc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAlB;;AA8BAS,MAAM,CAACC,OAAP,GAAiB;AACfxB,EAAAA,SAAS,EAATA;AADe,CAAjB","sourcesContent":["const Course = require(\"../api/models/course\");\r\n\r\n// Function to add a review to a specific course\r\nconst addReview = async (req, res) => {\r\n  const courseId = req.params.id;\r\n  const { author, rating, reviewText } = req.body;\r\n\r\n  try {\r\n    // Find the course by ID\r\n    const course = await Course.findById(courseId).exec();\r\n    if (!course) {\r\n      return res.status(404).send(\"Course not found\");\r\n    }\r\n\r\n    // Create a new review object\r\n    const newReview = {\r\n      author,\r\n      rating,\r\n      reviewText,\r\n      timestamp: new Date().toLocaleString(), // Include time for better detail\r\n    };\r\n\r\n    // Push the new review to the course's reviews array\r\n    course.reviews.push(newReview);\r\n    await course.save();\r\n\r\n    // Redirect to the course detail page after adding the review\r\n    res.redirect(`/courses/${courseId}`);\r\n  } catch (error) {\r\n    res.status(500).send(\"Error adding review: \" + error);\r\n  }\r\n};\r\n\r\nmodule.exports = {\r\n  addReview,\r\n};"],"file":"reviewcontrollers.dev.js"}