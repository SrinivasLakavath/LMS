{"version":3,"sources":["reviewController.js"],"names":["Course","require","exports","addReview","req","res","courseId","_req$body","author","rating","reviewText","course","newReview","regeneratorRuntime","async","_context","prev","next","params","id","body","awrap","findById","exec","sent","abrupt","timestamp","Date","reviews","push","save","redirect","concat","t0","message","stop"],"mappings":"aAAA,IAAMA,OAASC,QAAQ,2BAEvBC,QAAAC,UAAA,SAAAC,EAAAC,GAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAEQX,EAAWF,EAAIc,OAAOC,GAF9BZ,EAGyCH,EAAIgB,KAAnCZ,EAHVD,EAGUC,OAAQC,EAHlBF,EAGkBE,OAAQC,EAH1BH,EAG0BG,WAH1BK,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAQ,MACoBrB,OAAAsB,SAAAhB,GAAAiB,QADpB,KAAA,EAAA,GACoBZ,EADpBI,EAAAS,KAAA,CAAAT,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAU,OAAA,SAEQnB,EAAAA,OAAc,KAACY,KADH,qBADpB,KAAA,EAAA,OACoBN,EAAA,CAAAJ,OAAAA,EAAAC,OAAAA,EAiBdC,WAAAA,EAjBcgB,UAAA,IAAAC,MAAAhB,EAAAiB,QAAAC,KAAAjB,GADpBG,EAAAE,KAAA,GAAAJ,mBAAAQ,MA0BUV,EAAOmB,QA1BjB,KAAA,GACoBzB,EAAA0B,SAAA,YAAAC,OAAA1B,IADpBS,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAkB,GAAAlB,EAAA,MAAA,GAiBMN,EAAAA,OAAAA,KAAAA,KAAAA,wBAFgBM,EAAAkB,GAAAC,SAftB,KAAA,GAAA,IAAA,MAAA,OAAAnB,EAAAoB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA","file":"reviewController.min.js","sourcesContent":["const Course = require(\"../../api/models/course\"); // Adjust the path if necessary\r\n\r\n// Function to add a review to a specific course\r\nexports.addReview = async (req, res) => {\r\n  const courseId = req.params.id; // Getting the course ID from route parameters\r\n  const { author, rating, reviewText } = req.body; // Destructuring form data from request body\r\n\r\n  try {\r\n    // Find the course by its ID\r\n    const course = await Course.findById(courseId).exec();\r\n    \r\n    // If course not found, return a 404 status\r\n    if (!course) {\r\n      return res.status(404).send(\"Course not found\");\r\n    }\r\n\r\n    // Create a new review object\r\n    const newReview = {\r\n      author,\r\n      rating,\r\n      reviewText,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Push the new review into the course's reviews array\r\n    course.reviews.push(newReview);\r\n\r\n    // Save the updated course document\r\n    await course.save();\r\n\r\n    // Redirect back to the course details page (or handle success response)\r\n    res.redirect(`/courses/${courseId}`);\r\n    \r\n  } catch (error) {\r\n    // Handle any errors\r\n    res.status(500).send(\"Error adding review: \" + error.message);\r\n  }\r\n};"]}